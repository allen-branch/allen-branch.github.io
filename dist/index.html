<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>allen-branch.github.io</title>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Z797K0K5MF"
    ></script>
    <script>
      window.GTAG_ID = "G-Z797K0K5MF";
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", window.GTAG_ID);
    </script>
    <script>
      // load Branch
      (function (b, r, a, n, c, h, _, s, d, k) {
        if (!b[n] || !b[n]._q) {
          for (; s < _.length; ) c(h, _[s++]);
          d = r.createElement(a);
          d.async = 1;
          d.src = "https://cdn.branch.io/branch-latest.min.js";
          k = r.getElementsByTagName(a)[0];
          k.parentNode.insertBefore(d, k);
          b[n] = h;
        }
      })(
        window,
        document,
        "script",
        "branch",
        function (b, r) {
          b[r] = function () {
            b._q.push([r, arguments]);
          };
        },
        { _q: [], _v: 1 },
        "addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking qrCode".split(
          " "
        ),
        0
      );
      gtag("get", window.GTAG_ID, "client_id", (client_id) => {
        // init Branch
        branch.init(
          "key_live_hkDytPACtipny3N9XmnbZlapBDdj4WIL",
          { metadata: { $google_analytics_client_id: client_id } },
          function (err, data) {
            console.log("branch online ğŸš€", err, data);
          }
        );
      });
    </script>
  </head>
  <body>
    <h1>allen-branch.github.io</h1>
    <p>ğŸŒ³</p>
    <p>Check back later.</p>
    <a href="another-one.html">Another one</a>

    <h2>We have wares ğŸª</h2>
    <button id="buy">Buy one</button>
    <script>
      document.querySelector("#buy").addEventListener("click", (e) => {
        e.preventDefault();
        console.log("buying one");
        gtag("event", "buy", {
          event_category: "engagement",
          event_label: "buy",
          value: 1,
        });
        var event_and_custom_data = {
          transaction_id: "tras_Id_1232343434",
          currency: "USD",
          revenue: 180.2,
          shipping: 10.5,
          tax: 13.5,
          coupon: "promo-1234",
          affiliation: "high_fi",
          description: "Preferred purchase",
          purchase_loc: "Palo Alto",
          store_pickup: "unavailable",
        };

        var content_items = [
          {
            $content_schema: "COMMERCE_PRODUCT",
            $og_title: "Nike Shoe",
            $og_description: "Start loving your steps",
            $og_image_url: "http://example.com/img1.jpg",
            $canonical_identifier: "nike/1234",
            $publicly_indexable: false,
            $price: 101.2,
            $locally_indexable: true,
            $quantity: 1,
            $sku: "1101123445",
            $product_name: "Runner",
            $product_brand: "Nike",
            $product_category: "Sporting Goods",
            $product_variant: "XL",
            $rating_average: 4.2,
            $rating_count: 5,
            $rating_max: 2.2,
            $creation_timestamp: 1499892854966,
            $exp_date: 1499892854966,
            $keywords: ["sneakers", "shoes"],
            $address_street: "230 South LaSalle Street",
            $address_city: "Chicago",
            $address_region: "IL",
            $address_country: "US",
            $address_postal_code: "60604",
            $latitude: 12.07,
            $longitude: -97.5,
            $image_captions: ["my_img_caption1", "my_img_caption_2"],
            $condition: "NEW",
            $custom_fields: { foo1: "bar1", foo2: "bar2" },
          },
          {
            $og_title: "Nike Woolen Sox",
            $canonical_identifier: "nike/5324",
            $og_description:
              "Fine combed woolen sox for those who love your foot",
            $publicly_indexable: false,
            $price: 80.2,
            $locally_indexable: true,
            $quantity: 5,
            $sku: "110112467",
            $product_name: "Woolen Sox",
            $product_brand: "Nike",
            $product_category: "Apparel & Accessories",
            $product_variant: "Xl",
            $rating_average: 3.3,
            $rating_count: 5,
            $rating_max: 2.8,
            $creation_timestamp: 1499892854966,
          },
        ];

        var customer_event_alias = "my custom alias";

        branch.logEvent(
          "PURCHASE",
          event_and_custom_data,
          content_items,
          customer_event_alias,
          function (err) {
            if (err) {
              console.error(err);
              alert("Error: " + err.message);
            } else {
              // random emoji selection

              alert("You bought a " + generateRandomEmoji());
            }
          }
        );
      });

      function generateRandomEmoji() {
        const emojis = [
          "ğŸ",
          "ğŸŠ",
          "ğŸ‡",
          "ğŸ“",
          "ğŸ’",
          "ğŸ‘",
          "ğŸ",
          "ğŸ¥",
          "ğŸ…",
          "ğŸ†",
          "ğŸ¥‘",
          "ğŸ¥¦",
          "ğŸ¥¬",
          "ğŸ¥’",
          "ğŸŒ¶",
          "ğŸŒ½",
          "ğŸ¥•",
          "ğŸ¥”",
          "ğŸ ",
          "ğŸ¥",
          "ğŸ¥–",
          "ğŸ¥¨",
          "ğŸ¥¯",
          "ğŸ¥",
          "ğŸ§€",
          "ğŸ–",
          "ğŸ—",
          "ğŸ¥©",
          "ğŸ¥“",
          "ğŸ”",
          "ğŸŸ",
          "ğŸ•",
          "ğŸŒ­",
          "ğŸ¥ª",
          "ğŸŒ®",
          "ğŸŒ¯",
          "ğŸ¥™",
          "ğŸ¥š",
          "ğŸ³",
          "ğŸ¥˜",
          "ğŸ²",
          "ğŸ¥£",
          "ğŸ¥—",
          "ğŸ¿",
          "ğŸ§‚",
          "ğŸ¥«",
          "ğŸ±",
          "ğŸ˜",
          "ğŸ™",
          "ğŸš",
          "ğŸ›",
          "ğŸœ",
          "ğŸ",
          "ğŸ ",
          "ğŸ¢",
          "ğŸ£",
          "ğŸ¤",
          "ğŸ¥",
          "ğŸ¥®",
          "ğŸ¡",
          "ğŸ¥Ÿ",
          "ğŸ¥ ",
          "ğŸ¥¡",
          "ğŸ¦€",
          "ğŸ¦",
          "ğŸ¦",
          "ğŸ¦‘",
          "ğŸ¦ª",
          "ğŸ¦",
          "ğŸ§",
          "ğŸ¨",
          "ğŸ©",
          "ğŸª",
          "ğŸ‚",
          "ğŸ°",
          "ğŸ§",
          "ğŸ¥§",
          "ğŸ«",
          "ğŸ¬",
          "ğŸ­",
          "ğŸ®",
          "ğŸ¯",
        ];
        return emojis[Math.floor(Math.random() * emojis.length)];
      }
    </script>
  </body>
</html>
